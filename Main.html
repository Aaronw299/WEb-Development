<!--R00103122
Aaron Williams-->

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>The Middle String</title>
<link rel="stylesheet" type="text/css" href="mystyle.css">
<script type="text/javascript" src="myScript.js"></script>
<script>
var totalprice = 300.00;

function changecolor()
{
colorstring= document.getElementById("guitarcolor").value;
document.getElementById("guitarimage").style.backgroundColor=colorstring;

}

function changetype(value)
{
    if(value=='acc')
    {
      document.getElementById('guitarType').innerHTML="Model: Standard";
      document.getElementById('Custom').innerHTML="Custom: No";
       document.getElementById('guitar').src = "accoustic.png";
		 document.body.style.backgroundImage = "url('aback.jpg')";
		document.getElementById('guitarlogo').style.left ="470px";
       document.getElementById('guitarlogo').style.top="900px";
		document.getElementById("guitarcolor").style.visibility="hidden";
		document.getElementById("acctypes").style.visibility="visible";
		document.getElementById(totalprice).innerHTML="300";
	   document.getElementById("guitarimage").style.visibility="hidden";
	}

		if(value=='fl')
    {
      document.getElementById('guitarType').innerHTML="Model: Flare";
      document.getElementById('Custom').innerHTML="Custom: yes";
      document.getElementById('guitar').src = "accoustic2.png";
		document.body.style.backgroundImage = "url('aback.jpg')";
		document.getElementById('guitarlogo').style.left ="470px";
       document.getElementById('guitarlogo').style.top="900px";
		document.getElementById("guitarcolor").style.visibility="hidden";
		document.getElementById("acctypes").style.visibility="visible";
	}
		if(value=='wr')
    {
      document.getElementById('guitarType').innerHTML="Model: Worn Look";
      document.getElementById('Custom').innerHTML="Custom: yes";
       document.getElementById('guitar').src = "accoustic3.png";
		document.body.style.backgroundImage = "url('aback.jpg')";
		document.getElementById('guitarlogo').style.left ="470px";
       document.getElementById('guitarlogo').style.top="900px";
		document.getElementById("guitarcolor").style.visibility="hidden";
		document.getElementById("acctypes").style.visibility="visible";
	}
	if(value=='pf')
    {
      document.getElementById('guitarType').innerHTML="Model: Pink Floyd";
      document.getElementById('Custom').innerHTML="Custom: yes";
       document.getElementById('guitar').src = "accoustic4.png";
		document.body.style.backgroundImage = "url('aback.jpg')";
		document.getElementById('guitarlogo').style.left ="470px";
       document.getElementById('guitarlogo').style.top="900px";
		document.getElementById("guitarcolor").style.visibility="hidden";
		document.getElementById("acctypes").style.visibility="visible";

	}


    if(value=='ele'){
      document.getElementById('guitarType').innerHTML="Model: Electric";
      document.getElementById('Custom').innerHTML="Custom: yes";
        document.getElementById('guitar').src= "electric.png";
		document.body.style.backgroundImage = "url('eback.jpg')";
        document.getElementById('guitarlogo').style.left ="480px";
        document.getElementById('guitarlogo').style.top="600px";
		document.getElementById("guitarcolor").style.visibility="visible";
		document.getElementById("acctypes").style.visibility="hidden";

    }
}

function changelogo(img)
{
    if(img =="none"){
        totalprice = 300.00;
        document.getElementById('guitarlogo').style.visibility="hidden";
        document.getElementById('price').innerHTML="Total Price: &euro;"+ totalprice;
        document.getElementById('Logo').innerHTML="Logo: none";
    }

    if (img =="jumpman"){
        totalprice = 310.00;
        document.getElementById('guitarlogo').src="jumpman.png";
        document.getElementById('guitarlogo').style.visibility="visible";
        document.getElementById('price').innerHTML="Total Price: &euro;"+ totalprice;
        document.getElementById('Logo').innerHTML="Logo: Jumpman + 10.00";
    }

    if (img =="fish"){
        totalprice = 315.00;
        document.getElementById('guitarlogo').src= "fish.png";
        document.getElementById('guitarlogo').style.visibility="visible";
        document.getElementById('price').innerHTML="Total Price: &euro;"+ totalprice;
        document.getElementById('Logo').innerHTML="Logo: Fish + 15.00";
    }

    if (img =="spartan"){
        totalprice = 320.00;
        document.getElementById('guitarlogo').src= "spartan.gif";
        document.getElementById('guitarlogo').style.visibility="visible";
        document.getElementById('price').innerHTML="Total Price: &euro;"+ totalprice;
        document.getElementById('Logo').innerHTML="Logo: Spartan + 20.00";
    }

     if (img =="batman"){
         totalprice = 325.00;
        document.getElementById('guitarlogo').src= "batman.png";
        document.getElementById('guitarlogo').style.visibility="visible";
        document.getElementById('price').innerHTML="Total Price: &euro;"+ totalprice;
        document.getElementById('Logo').innerHTML="Logo: Batman + 25.00";
    }

    if (img =="ghostbusters"){
        totalprice = 330.00;
        document.getElementById('guitarlogo').src= "ghostbusters.png";
        document.getElementById('guitarlogo').style.visibility="visible";
        document.getElementById('price').innerHTML="Total Price: &euro;"+ totalprice;
        document.getElementById('Logo').innerHTML="Logo: Ghostbusters + 30.00";
    }
}

function checkppsn(){
    var total = 0;
    var multiplier = 8;
	var validpps = true;


    var pps = document.getElementById("ppsn").value;
    pps = pps.toUpperCase();

	if (pps == null || pps =="")
	{validpps = false;}

    if (pps.length !=8)
    {validpps = false;}


        for (var n=0; n < pps.length-1; n++)
        {
           var x = parseInt(pps.slice(n,n+1),10);
            x = x * multiplier;
            total = total + x;
            multiplier--;

        }
            var pos = pps.charCodeAt(7);
            pos = pos - 64;

            if (pos != total % 23)
            {
				validpps=false;
            }

	return validpps;

}

function checkdni(){
var validdni = true;

var id = document.getElementById("ppsn").value;
var letter = id.charAt(8);
letter = letter.toUpperCase();

var idLetters = ['T', 'R', 'W', 'A', 'G', 'M', 'Y', 'F', 'P', 'D', 'X', 'B', 'N', 'J', 'Z', 'S', 'Q', 'V', 'H', 'L', 'C', 'K', 'E'];

if (id == null || id == "")
{ validdni = false;alert}

if (id.length != 9)
{ validdni = false;alert}

	var validLetter;
	for(var i=0; i < idLetters.length; i++)
	{
		if(letter == idLetters[i])
		{
			validLetter = i;
			break;
		}
	}

	id = parseInt(id.slice(0,8), 10);
	var x = id % 23;

	if(validLetter != x)
	{
		validdni = false;;
	}

return validdni;
}


function checkDiscount()
{
	var testpps = new Boolean();
	var testdni = new Boolean();


	testpps = checkppsn();
	testdni = checkdni();

	if(testdni == true || testpps == true)
	{

		if(testdni==true)
		{
			alert("Valid ID Enjoy your discount!");
			document.getElementById('discount').innerHTML="Felicidades su identificación es válida! Disfruta de tu descuento"
			document.getElementById('discountY/N').innerHTML="valid dni -%10";
		}

		if(testpps==true)
		{
			document.getElementById('discount').innerHTML="Comhghairdeas bhfuil do id bailí! Bain sult as do lascaine"
		}


		alert("Valid ID Enjoy your discount!");
		document.getElementById('price').innerHTML="Total Price: &euro;"+ (totalprice -(totalprice/10));
		document.getElementById('discountY/N').innerHTML="valid ppsn -%10";

	}
	else
	{
		alert("Invalid ID no discount for you!");
		document.getElementById('price').innerHTML="Total Price: &euro;"+ totalprice;
	}

}


function validateTel()
{

var validtel = true;

var mobilenumber = document.getElementById('tel').value;
    if ((mobilenumber==null) || (mobilenumber==""))
	{
	alert("There must be digits entered");
	validtel= false;
	}

	if (mobilenumber.length != 10)
	{
	alert("Number must be 10 digits long");
	validtel=false;
	}

	if (mobilenumber.slice(0,2) != "08")
	{
	alert("Number must begin with 08")
	validtel=false;
	}


	var i = mobilenumber.slice(2,3);

	if (! ((i=="3") || (i=="5") || (i=="6") || (i=="7"))  )
	{
		alert("08 must be followed by either 3, 5, 6, 7");
		validtel=false;
	}


	var count = 0;
	for (var j=0;j<3;j++)
	{
		i = parseInt(mobilenumber.slice(j,j+1));
		count = count + i;
	}
	count = (count + 1);
	count = (count / 2);

	i = parseInt(mobilenumber.slice(9,10), 10);
	if (!(i == count))
	{
		validtel=false;
	}

	return validtel;
}


function validateCC()
{

var total = 0;
var n = 0;
var validcc = true;


var cardNumber = document.getElementById('ccnum').value;
if (cardNumber.length != 16)
	{
	validcc = false;
	}

	var firstArray = new Array();
	var secondArray = new Array();

	for (var i=0;i < 8;i++){


		firstArray[i] = parseInt(cardNumber.slice(n,n+1), 10) * 2;
		if (firstArray[i] >= 10)
		{
			firstArray[i] = firstArray[i]-9;
		}
		n++;
		secondArray[i] = parseInt(cardNumber.slice(n,n+1), 10);
		n++;
	}
	for(var ii=0; ii < firstArray.length; ii++)
	{
	total += firstArray[ii];
	total += secondArray[ii];
	}
	total = total % 10;
	if (total != 0)
	{
		validcc = false;
	}

	return validcc;
}

function validateForm()
{
    var valid = true;
	var testtel = false;
	var testcc = false;

	testcc= validateCC();
	testtel = validateTel();


    if (testtel == false)
        {
            alert('Please enter a valid telephone number');
            document.getElementById('tel').style.background='yellow';
            document.getElementById('tel').style.border="solid red 2px";
            valid = false;

        }

    if (testcc==false)
        {
            alert('Please enter a valid credit card');
            document.getElementById('ccnum').style.background='yellow';
            document.getElementById('ccnum').style.border="solid red 2px";
            valid = false;

        }



    return valid;

}

</script>
</head>

<body>
<form name"info" onsubmit="return validateForm()" method="get" action="http://atlantis.cit.ie/displayvalues.php">
<div id="Header"><img src=banner.jpg alt="guitar" height="400" width ="1920"></div>
<div id="colorpicker">
  <center>
  <h2>Personalise Your guitar and pick</h2>
  <div id="sliders">
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>Choose a guitar color:
      <input id="guitarcolor" type="color" name="color" value="#ffffff" onchange="changecolor(this.value)">
      <br>
      Accoustic
      <input id="accoustic" type="radio" name="type" checked="true" value="acc" onclick="changetype(this.value)">
      <input id="electric" type="radio" name="type" value ="ele" onclick="changetype(this.value)">
      Electric <br>
      <br>
    <div id="acctypes"> Standard
      <input id="accoustic2" type="radio" name="type2" checked="true" value="acc" onclick="changetype(this.value)">
      <br>
      Flare
      <input id="accoustic2" type="radio" name="type2" checked="true" value="fl" onclick="changetype(this.value)">
      <br>
      Worn
      <input id="accoustic2" type="radio" name="type2" checked="true" value="wr" onclick="changetype(this.value)">
      <br>
      Dark side of the moon
      <input id="accoustic2" type="radio" name="type2" checked="true" value="pf" onclick="changetype(this.value)">
    </div>
    </p>

    Please enter valid Irish PPS or Spanish DNI number for discount of 10%
    <input type="text" name="PPSN" id="ppsn" placeholder="PPS Number">
    <button type="button" onclick="checkDiscount()">Check</button>
    <br>
    <p id="discount">You have not yet qualified for a discount.</p>
  </div>
</div>
<div>
  <h2>Choose from one of our custom acoustic guitars or customise your own electric guitar and pick!!</h2>
</div>
<div id="guitarimage"><img src="accoustic.png" alt="guitar" width="1500" height="600" id="guitar" align="top">
  <img src="fish.png" id="guitarlogo" width="40" height="40" alt="logo">
  </center>
</div>
<div id ="header">
   <div align="center">Add a Logo to your new custom axe</div>
 </div>

<div class="img"> <a target="_blank" > <img src="none.png" alt="none" width="300" height="200"> </a>
  <input type="button" name="Logos" id="none" value="none" onclick="changelogo(this.value)" >
  <div class="desc">If you dont want a logo click this button</div>
</div>

<div class="img"> <a target="_blank" href="ghostbusters.png"> <img src="ghostbusters.png" alt="Ghosts" width="300" height="200"> </a>
  <input type="button" name="Logos" id="GhostBusters" value="ghostbusters" onclick="changelogo(this.value)">
  <div class="desc">for the ghosts of rocks past</div>
</div>
<div class="img"> <a target="_blank" href="batman.png"> <img src="batman.png" alt="The Bat" width="300" height="200"> </a>
  <input type="button" name="Logos" id="Batman" value="batman" onclick="changelogo(this.value)">
  <div class="desc">Fight crime one tune at a time</div>
</div>
<div class="img"> <a target="_blank" href="spartan.gif"> <img src="spartan.gif" alt="Mountains" width="300" height="200"> </a>
  <input type="button" name="Logos" id="Spartan" value="spartan" onclick="changelogo(this.value)">
  <div class="desc">For the warriors of rock</div>
</div>
<div class="img"> <a target="_blank" href="fish.png"> <img src="fish.png" alt="Mountains" width="300" height="200"> </a>
  <input type="button" name="Logos" id="Fish" value="fish" onclick="changelogo(this.value)">
  <div class="desc">For those who love a tribal touch</div>
</div>
<div class="img"> <a target="_blank" href="Jumpman.png"> <img src="Jumpman.png" alt="jumpman" width="300" height="200"> </a>
  <input type="button" name="Logos" id="Jumpman" value="jumpman" onclick="changelogo(this.value)" >
  <div class="desc">For slamming Riffs</div>
</div>
<div class="ordercol">
<center>
  <h1>Order Summary</h1>
</center>
<center>
  <p id="basePrice">Base Price: &euro;300</p>
  <p id="guitarType">Size: </p>
  <p id="Custom">Custom?: </p>
  <p id="Logo">Logo: </p>
  <p id="discountY/N">PPSN discount?: </p>
  <p>___________________</p>
  <p id="price">Total Price: &euro;300</p>
</center>
<center>
  <h1>Customer Details </h1>
</center>
<form name="customerDetails" method="get" action="http://atlantis.cit.ie/displayvalues.php">
  <center>
    <table>
      <tr>
        <td>First name : </td>
        <td><input name="fname" type="text" placeholder="First Name" required/></td>
      </tr>
      <tr>
        <td>Last name : </td>
        <td><input name="lname"type="text" placeholder="Last Name" required/></td>
      </tr>
      <tr>
        <td>Date of Birth:
          <input type="date" name="bday" required></td>
      </tr>
      <tr>
        <td>Address : </td>
        <td><textarea name="address" placeholder="Delivery Address"  rows= "3" cols="21" required/>
          </textarea></td>
      </tr>
      <tr>
        <td>Email Address : </td>
        <td><input name="email" id="email" type="email" placeholder="Email Address" onchange="discount()" required/></td>
      </tr>
      <tr>
        <td>Phone Number : </td>
        <td><input type="text" id="tel" name="mobilenumber" pattern=[0-9]{10} required placeholder="Mobile Number"></td>
      </tr>
    </table>
  </center>
  <center>
    <input type="submit" value="Order Now">
    <br>
  </center>
</form>
</div>
</body>
</html>
